import{u as D,a as C,_ as N,f as H}from"./formatTransaction-1d517e3a.js";import{o,c as n,r as i,a as d,b as c,d as h,F as x,e as y,w as j,v as E,f as P,t as V,g as _,h as m,T as k,_ as B,i as A,j as M,u as q,k as G,n as g,p as R,l as z,m as J,q as K,s as w}from"./index-ce070541.js";const Q={class:"form"},W={key:0,class:"form__header"},X={key:1,class:"form__body"},Y={class:"form__footer"},Z={key:0,class:"form__btn form__btn--reset",type:"reset"},ee=["disabled"],te={__name:"Form",props:{isBtnDisabled:{type:Boolean,default:!1}},setup(s){return(t,p)=>(o(),n("form",Q,[t.$slots.header?(o(),n("header",W,[i(t.$slots,"header")])):d("",!0),t.$slots.default?(o(),n("div",X,[i(t.$slots,"default")])):d("",!0),c("footer",Y,[i(t.$slots,"footer"),t.$slots.reset?(o(),n("button",Z,[i(t.$slots,"submit",{},()=>[h("Reset")])])):d("",!0),c("button",{class:"form__btn form__btn--submit",type:"submit",disabled:s.isBtnDisabled},[t.$slots.submit?i(t.$slots,"submit",{key:0}):(o(),n(x,{key:1},[h(" Submit ")],64))],8,ee)])]))}};const se={class:"form__item select"},oe={key:0,class:"text-input__label"},re={class:"select__wrap"},ne=["disabled","readOnly"],ae=["value"],le={key:0,class:"text-input__tip"},ue={key:0,class:"text-input__error"},T={__name:"Select",props:{options:{type:Array,default:()=>[],validator(s){return s.every(t=>t.txt!==void 0&&t.value!==void 0)}},modelValue:{type:String,default:""},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:t}){const p=s,e=t,a=y({get(){return p.modelValue},set(l){e("update:modelValue",l)}});return(l,v)=>(o(),n("label",se,[l.$slots.label?(o(),n("span",oe,[i(l.$slots,"label")])):d("",!0),c("span",re,[j(c("select",{class:"select__input","onUpdate:modelValue":v[0]||(v[0]=u=>a.value=u),disabled:s.disabled,readOnly:s.readOnly},[(o(!0),n(x,null,P(s.options,(u,b)=>(o(),n("option",{value:u.value,key:b},V(u.txt&&u.txt),9,ae))),128))],8,ne),[[E,a.value]])]),_(k,null,{default:m(()=>[l.$slots.tip?(o(),n("span",le,[i(l.$slots,"tip")])):d("",!0)]),_:3}),_(k,null,{default:m(()=>[l.$slots.error?(o(),n("span",ue,[i(l.$slots,"error")])):d("",!0)]),_:3})]))}};const ie={class:"form__item text-input"},ce={key:0,class:"text-input__label"},de=["value","type","placeholder","disabled","readOnly"],_e=["value","type","placeholder","disabled","readOnly"],me={key:3,class:"text-input__limit"},pe={key:0,class:"text-input__tip"},fe={key:0,class:"text-input__error"},O={__name:"TextInput",props:{type:{type:String,default:"text",validator(s){return["text","number","password","email","search","url"].includes(s)}},modelValue:{default:""},placeholder:{type:String,default:""},disabled:{type:Boolean,default:!1},readOnly:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(s,{emit:t}){const p=t,e=a=>{p("update:modelValue",a.target.value)};return(a,l)=>(o(),n("label",ie,[a.$slots.label?(o(),n("span",ce,[i(a.$slots,"label")])):d("",!0),s.type==="number"?(o(),n("input",{key:1,step:"any",class:"text-input__input",value:s.modelValue,onInput:e,type:s.type,placeholder:s.placeholder,disabled:s.disabled,readOnly:s.readOnly},null,40,de)):(o(),n("input",{key:2,class:"text-input__input",value:s.modelValue,onInput:e,type:s.type,placeholder:s.placeholder,disabled:s.disabled,readOnly:s.readOnly},null,40,_e)),a.$slots.limit?(o(),n("span",me,[i(a.$slots,"limit")])):d("",!0),_(k,null,{default:m(()=>[a.$slots.tip?(o(),n("span",pe,[i(a.$slots,"tip")])):d("",!0)]),_:3}),_(k,null,{default:m(()=>[a.$slots.error?(o(),n("span",fe,[i(a.$slots,"error")])):d("",!0)]),_:3})]))}};const I=s=>(R("data-v-a5bfb6f4"),s=s(),z(),s),ye={class:"currency-convector"},ve={class:"form__group"},be=I(()=>c("span",{class:"form__group__title"},"Віддаю",-1)),$e={class:"form__group__items"},he={class:"form__group"},Ve=I(()=>c("span",{class:"form__group__title"},"Отримую",-1)),ke={class:"form__group__items"},Se={__name:"CurrencyConverter",setup(s){const t=D(),p=C(),e=A({from:{input:"",currency:"USD"},to:{input:"",currency:"UAH"}}),a=y(()=>Object.keys(t.currencies).filter(r=>r!==e.to.currency).map(r=>({txt:`(${r}) ${t.currencies[r].name}`,value:r}))),l=y(()=>Object.keys(t.currencies).filter(r=>r!==e.from.currency).map(r=>({txt:`(${r}) ${t.currencies[r].name}`,value:r}))),v=y(()=>`${e.from.currency}${t.pairSeparator}${e.to.currency}`),u=y(()=>t.currenciesPair[v.value].rate),b=y(()=>e.from.input*u.value>t.currencies[e.to.currency].reserve),S=()=>{g(()=>{const r=e.from.input*u.value;b.value?alert("Недостатній резерв"):e.to.input=r||""})},U=()=>{g(()=>{const r=e.to.input*1/u.value;r>t.currencies[e.to.currency].reserve?alert("Недостатній резерв"):e.from.input=r||""})},F=()=>{const r=e.from.currency;e.from.currency=e.to.currency,e.to.currency=r},L=r=>{p.addToList({from:{amount:+e.from.input,currency:e.from.currency},to:{amount:+e.to.input,currency:e.to.currency},rate:+u.value,timestamp:new Date().getTime()}),t.currencies[e.to.currency].reserve-=e.to.input,e.from.input="",e.to.input=""};return(r,f)=>(o(),n("div",ye,[_(te,{onSubmit:G(L,["prevent"]),"is-btn-disabled":b.value||!e.from.input},{footer:m(()=>[h(" Курс обміну: "+V(u.value),1)]),submit:m(()=>[h("Обміняти")]),default:m(()=>[c("div",ve,[be,c("div",$e,[_(T,{"onUpdate:modelValue":[S,f[0]||(f[0]=$=>e.from.currency=$)],modelValue:e.from.currency,options:a.value},null,8,["modelValue","options"]),_(O,{"onUpdate:modelValue":[S,f[1]||(f[1]=$=>e.from.input=$)],type:"number",modelValue:e.from.input},null,8,["modelValue"])])]),c("button",{onClick:F,type:"button",class:"currency-convector__swap"},"↑↓"),c("div",he,[Ve,c("div",ke,[_(T,{"onUpdate:modelValue":[S,f[2]||(f[2]=$=>e.to.currency=$)],modelValue:e.to.currency,options:l.value},null,8,["modelValue","options"]),_(O,{"onUpdate:modelValue":[U,f[3]||(f[3]=$=>e.to.input=$)],type:"number",modelValue:e.to.input},M({limit:m(()=>[h(" Резерв: "+V(q(t).currencies[e.to.currency].reserve)+" "+V(e.to.currency),1)]),_:2},[b.value?{name:"error",fn:m(()=>[h(" Недостатній резерв ")]),key:"0"}:void 0]),1032,["modelValue"])])])]),_:1},8,["onSubmit","is-btn-disabled"])]))}},ge=B(Se,[["__scopeId","data-v-a5bfb6f4"]]);const we={class:"page home"},Te={class:"home__wrapper"},Oe={__name:"Home",setup(s){const t=C(),p=J(1),e=y(()=>t.list.map(l=>H(l))),a=y(()=>!!(t.list&&t.list.length));return(l,v)=>{const u=K("router-link");return o(),n("div",we,[c("div",Te,[_(ge),a.value?(o(),w(N,{key:0,modelValue:p.value,"onUpdate:modelValue":v[0]||(v[0]=b=>p.value=b),items:e.value},null,8,["modelValue","items"])):d("",!0)]),a.value?(o(),w(u,{key:0,to:"/statistic"},{default:m(()=>[h("Go to statistic")]),_:1})):d("",!0)])}}},Be=B(Oe,[["__scopeId","data-v-f3c5ebfc"]]);export{Be as default};
